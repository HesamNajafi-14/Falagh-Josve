{% extends 'publisher/base.html' %}
{% block body %}


<div class="container-fluid">
<div class="row" style="padding-top: 65px">

<div class="col-sm-1" style="color: red">
</div>

<div class="col-sm-10">
            <div class="card mb-3">
                <div class="card-body">
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert">
                            {{ message }}
                        </div>
                    {% endfor %}
                   

                        
                        <ol class="breadcrumb">
      <li class="breadcrumb-item">
            <a href="#">نتیجه سرچ شما</a>
      </li>
</ol>


                    {% if query %}
                        {% if books %}

                        <div class="table-responsive">
                            <table class="table table-bordered"  width="100%" cellspacing="0">
                                <thead>
                                <tr>
                                    <th style="text-align: right;">ایدی</th>
                                    <th style="text-align: right;">منتشر کننده</th>
                                    
                                    <th style="text-align: right;">استاد</th>
                                    <th style="text-align: right;">نام جزوه</th>
                                    
                                    <th style="text-align: right;">دانلود</th>
                                </tr>
                                </thead>
                                <tbody>


                                    {% for book in books %}

                            
                                    <tr>
                                    <td style="text-align: right;">{{ book.id }}</td>
                                    <td style="text-align: right;">{{  user.username }}</td>
                                    

                                    <td style="text-align: right;">{{ book.author }}</td>
                                    <td style="text-align: right;">{{ book.title }}</td>
                                    


                                        
                                        <td style="text-align: right;">
                                            {% if book.pdf %}
                                            <a href="{{ book.pdf.url }}" download class="btn btn-success" style="text-decoration: none; color: white; padding: 10px 15px; margin-right: 10px; border-radius: 5px; background-color: #28a745; border-color: #28a745;">
                                                <i class="fas fa-download"></i> دانلود فایل
                                            </a>
                                            <span style="font-size: 0.9em; color: #6c757d;">حجم فایل: {{ book.formatted_file_size }}</span>
                                            {% else %}
                                            <span class="text-muted">فایلی وجود ندارد</span>
                                            {% endif %}
                                    </td>
                                    
                                    </tr>

                                    <!-- end for and if -->
                                    {% endfor %}
                                </tbody>
                            </table>


                        {%else%}


                            <center><h3 style="text-align:center; color:yellow; background: green; width: 600px" id="answer">همچین جزوه ای در دیتابیس موجود نیست</h3></center>

                            

                        {%endif%}    
                    {% endif %}
                            </tbody>
                        </table>

                        {% if files.has_other_pages %}
                            <ul class="pagination">
                                {% if files.has_previous %}
                                    <li class="waves-effect"><a href="?page=
                                            {{ files.previous_page_number }}{% if request.GET.query %}&query={{ request.GET.query }}{% endif %}"><i
                                            class="material-icons text-primary">&laquo;</i></a></li>
                                {% else %}
                                    <li class="disabled"><a href="#!"><i class="material-icons text-primary">&laquo;</i></a></li>
                                {% endif %}
                                {% for num in files.paginator.page_range %}
                                    {% if files.number == num %}
                                        <li class="active"><a href="#!">{{ num }}</a></li>
                                    {% else %}
                                        <li class="waves-effect"><a
                                                href="?page={{ num }}{% if request.GET.query %}&query={{ request.GET.query }}{% endif %}">{{ num }}</a></li>
                                    {% endif %}
                                {% endfor %}
                                {% if files.has_next %}
                                    <li class="waves-effect"><a
                                            href="?page={{ files.next_page_number }}{% if request.GET.query %}&query={{ request.GET.query }}{% endif %}"><i
                                            class="material-icons">&raquo;</i></a></li>
                                {% else %}
                                    <li class="disabled"><a href="#!"><i class="material-icons">&raquo;</i></a></li>
                                {% endif %}
                            </ul>
                        {% endif %}




                    </div>
                </div>
            </div>
        </div>
    </div>



        
          </div>
        </div>
      </div>
    </div>

{% endblock body %}

{% block extrascripts %}
  <script type="text/javascript">
  </script>
{% endblock extrascripts %}




